<%- model_class = Content -%>
<div class="page-header">
  <h1><%=t '.title', :default => "コンテンツ一覧" %></h1>
</div>

<div>
  <%= render :partial => 'search_form', locals: {action_path: contents_path, check_flag: @check_flag} %>
</div>

<table class="table table-striped">
  <thead>
    <tr>
      <th>ID</th>
      <th>コンテンツ名</th>
      <th>種別</th>
      <th>タグ</th>
      <th>再生時間</th>
      <th>有効期間</th>
      <th>有効/無効</th>
      <th>更新日</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <% @contents.each do |content| %>
      <tr>
        <td><%= content.id %></td>
        <td><%= content.name %></td>
        <td><%= content.type %></td>
        <td><%= content.content_tags.map{|ct| ct.tag.name}.join(',') %></td>
        <td><%= content.playing_sec.nil? ? "" : Time.at(content.playing_sec).utc.strftime("%R") %></td>
        <td><%= "#{DateTime.parse(content.validity_start_date).strftime('%Y/%m/%d')} ～ #{DateTime.parse(content.validity_end_date).strftime('%Y/%m/%d')}" %></td>
        <td><%= content.enabled ? "有効" : "無効" %></td>
        <td><%= content.created_at.strftime('%Y/%m/%d') %></td>
        <td>
          <%= link_to t('.edit', :default => t("helpers.links.edit")),
                      edit_content_path(content), :class => 'btn btn-default btn-xs' %>
          <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
                      iticket_content_path(content),
                      :method => :delete,
                      :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
                      :class => 'btn btn-xs btn-danger' %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<div class="container">
  <%= link_to "新規登録",
      new_content_path,
      :class => 'btn btn-primary' %>
</div>