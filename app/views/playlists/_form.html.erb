<%= simple_form_for @playlist, wrapper: "horizontal_form", :html => { :class => 'form-horizontal' } do |f| %>
  <%= f.input :name, input_wrapper_html: { class: "col-xs-8" } %>
  <%= error_span(@playlist[:name]) %>
  <%= f.input :channel_id ,as: :select, required: true, collection: Channel.order(:id).map{|c| [c.name,c.id]}, input_wrapper_html: { class: "col-xs-8" } %>
  <%= error_span(@playlist[:channel_id]) %>
  <%= f.input :play_start_date, as: :date_picker, input_wrapper_html: { class: "col-xs-8" } %>
  <%= error_span(@playlist[:play_start_date]) %>
  <%= f.input :play_end_date, as: :date_picker, input_wrapper_html: { class: "col-xs-8" } %>
  <%= error_span(@playlist[:play_end_date]) %>
  <%= f.input :release_date, as: :date_picker, input_wrapper_html: { class: "col-xs-8" } %>
  <%= error_span(@playlist[:release_date]) %>
  
  <%= link_to "コンテンツ検索",
    contents_path(playlist_id: 0), :class => 'btn btn-default btn-xs' %>
  
  <table class="table table-striped">
    <thead>
      <tr>
        <th>ID</th>
        <th>コンテンツ名</th>
        <th>種別</th>
        <th>サムネイル</th>
        <th>再生時間</th>
        <th>有効期間</th>
        <th>有効/無効</th>
        <th>更新日</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <% if @playlist.contents.size.zero? %>
        <tr><td rowspan=9>コンテンツが未登録です。</td></tr>
      <% else %>
        <% @playlist.contents.each do |content| %>
        <tr>
          <td><%= content.id %></td>
          <td><%= content.name %></td>
          <td><%= content.type %></td>
          <td><%= content.thumbnail_url %></td>
          <td><%= content.playing_sec.nil? ? "" : Time.at(content.playing_sec).utc.strftime("%R") %></td>
          <td><%= "#{content.validity_start_date} ～ #{content.validity_end_date}" %></td>
          <td><%= content.enabled ? "有効" : "無効" %></td>
          <td><%= content.created_at.strftime('%Y/%m/%d') %></td>
          <td>
            <%= link_to t('.edit', :default => t("helpers.links.edit")),
                        edit_iticket_content_path(content), :class => 'btn btn-default btn-xs' %>
            <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
                        iticket_content_path(content),
                        :method => :delete,
                        :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
                        :class => 'btn btn-xs btn-danger' %>
          </td>
        </tr>
        <% end %>
      <% end %>
    </tbody>
  </table>
  
  <%= f.button :submit, :class => 'btn-primary' %>
  <%= link_to t('.cancel', :default => t("helpers.links.cancel")),
                playlists_path, :class => 'btn btn-default' %>
<% end %>
